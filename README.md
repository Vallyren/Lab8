# Lab8
## Лабораторная работа -  выбрать один инструмент мониторинга, обосновать свои выбор и познакомиться с его работой и возможностями на практике
### Исходные данные: филиал технической поддержки специализированного программного обеспечения для учреждений (50 территориально разделенных здания). Филиал осуществляет техническую поддержку серверного, сетевого оборудования учреждений в удаленном режиме. В каждом учреждении присутствует несколько серверов (от 1 до 5), сетевое оборудование (сетевое оборудование провайдера, маршрутизаторы, коммутаторы, межсетевые экраны), от 15 до 150 автоматизированных рабочих мест.
#### В качестве инструмента мониторинга был выбран Zabbix.
#### В качестве объектов мониторинга:
##### Сетевое оборудование учреждений:
1.	мониторинг доступности
2.	мониторинг нагрузки памяти, процессоров, дисковых устройств, 
3.	мониторинг состояния операционной системы, служб
##### Серверы учреждений.
1.	мониторинг доступности
2.	мониторинг нагрузки памяти, процессоров, дисковых устройств 
3.	мониторинг состояния операционной системы, служб
4.	мониторинг перезапуска
5.	мониторинг служб СПО
##### Датчики
1.	мониторинг температуры и влажности в помещениях серверных
#### Zabbix — опенсорсная система мониторинга и отслеживания статусов различных сервисов компьютерной сети, а также серверов и сетевого оборудования. Одна из лучших особенностей Zabbix заключается в том, что он не только имеет один из лучших удобных пользовательских интерфейсов, но и позволяет выполнять практически все операции по настройке через веб-интерфейс. 
![image](https://user-images.githubusercontent.com/122459067/221557071-92eeff80-dc0b-47a5-9ec1-678504b75c87.png)
![image](https://user-images.githubusercontent.com/122459067/221557092-0cbc672b-1b29-4f2d-9d8b-0f726227aa1f.png)
![image](https://user-images.githubusercontent.com/122459067/221557111-eacf94f8-595c-47d6-99b0-f30045a269fd.png)
#### Архитектура Zabbix включает четыре основных инструмента, позволяющих мониторить определенную рабочую среду и собирать о ней полный пакет данных для оптимизации работы. К этим инструментам относятся:
##### - сервер - ядро, хранящее в себе все данные системы, включая статистические, оперативные и конфигурационные. Дистанционно управляет сетевыми сервисами, оповещает администратора о возникающих проблемах с оборудованием, находящимся под наблюдением;
##### - прокси-сервис, работающий от имени сервера и собирающий данные о доступности и производительности устройств. Данные при этом сохраняются в буфер и загружаются на сервер в отдельную БД (MySQL, PostgreSQL, SQLite или Oracle). Прокси-сервис необходим для снижения нагрузки на сервер, на процессор и на жесткий диск;
##### - агент - программа (демон), которая активно отслеживает работу локальных ресурсов (накопителей, оперативной памяти, процессора) и приложений и собирает статистику по ним. Отражение текущего состояния физического сервера осуществляются Zabbix-агентом при помощи таких метрик, как загруженность ядра (Processor load), время ожидания ресурсов (CPU io wait time), объем системы подкачки (Total swap space).
##### - веб-интерфейс, который является частью сервера системы и часто запускается на том же физическом узле, что и Zabbix.
##### Основная логическая единица архитектуры Zabbix - это узлы сети (host), сервера, сетевое оборудование, находящиеся под наблюдением. Каждому серверу учреждения присваивается описание (#XXXXX_GM) и адрес - ip. Каждому компоненту сетевой инфраструктуры учреждения присваивается описание (#XXXXX_IVK) и адрес - ip. 
![image](https://user-images.githubusercontent.com/122459067/221557536-236e943f-a81f-49cb-a216-1031356da3de.png)
#### Узлы можно объединять в группы, например, по веб-серверам или серверам баз данных, для вывода только определенных серверов при наблюдении. При этом каждый узел имеет несколько элементов данных (items) - параметров, по которым ведется мониторинг.
#### Сбор совокупности данных системой Zabbix проводится наиболее часто следующими способами:
##### •	Zabbix agent (Zabbix-агент) - когда сервер собирает информацию у агента самостоятельно, подключаясь по определенному интервалу; В учреждениях предусмотрены агенты для серверов (Zabbix agent для Windows), агенты для сетевого оборудования (Zabbix agent для Linux)
![image](https://user-images.githubusercontent.com/122459067/221557734-03cbfd53-3fbd-419b-8d0f-b5ad514bc7d1.png)
![image](https://user-images.githubusercontent.com/122459067/221557751-6bdc98a9-e49f-4974-a39f-50c05322f773.png)
##### •	Simple check (Простые проверки) - простые операции, в том числе пинг;
![image](https://user-images.githubusercontent.com/122459067/221557812-88136dd2-6877-4439-98c3-619232a23cd6.png)
##### •	Zabbix trapper (Zabbix-траппер) — сбор информации с трапперов, представляющих собой мосты между используемыми сервисами и самой системой.
##### •	Zabbix aggregate (Zabbix-комплекс) - процесс, предусматривающий сбор совокупной информации из базы данных;
##### •	SSH agent (SSH-агент) - система подключается по SSH, работает с использованием указанных команд;
##### •	Calculate (Вычисление) - проверки, которые система производит, сопоставляя имеющиеся данные, в том числе после предыдущих сборов.
Функционал Zabbix включает в себя общие проверки для наиболее распространенных сервисов - СУБД, SSH, Telnet, VMware, NTP, POP, SMTP, FTP. Если стандартных настроек системы недостаточно, их можно изменить самостоятельно или же пользоваться дополнением через API. Также к стандартным функциям системы относятся: контроль нагрузки на процессор - касается и общих, и отдельных процессов; сбор данных об объеме свободной оперативной и физической памяти; мониторинг активности жесткого диска и мониторинг сетевой активности; пинг для проверки доступности узлов в сети.
У проверок есть заданные шаблоны (Templates), которые упрощают создание новых вычислений. Есть несколько типов шаблонов - стандартизированные шаблоны для сетевых устройств, настройка шаблонов HTTP, настройка шаблонов IPMI, настройка шаблонов ODBC.
### Для обработки данных в Zabbix используются триггеры - логические выражения со значениями FALSE, TRUE и UNKNOWN, которые можно создать вручную и протестировать на произвольных значениях перед использованием. У каждого триггера существует уровень серьезности угрозы, который маркируется цветом и передается звуковым оповещением в веб-интерфейсе. Например:
#### •	не классифицировано (Not classified) - серый;
#### •	информация (Information) - светло-синий;
#### •	предупреждение (Warning) - жёлтый;
#### •	средняя (Average) - оранжевый;
#### •	высокая (High) - светло-красный;
#### •	чрезвычайная (Disaster) - красный.
![image](https://user-images.githubusercontent.com/122459067/221558249-10ded864-e63d-4f2f-a482-868d36e2808c.png)
### В системе мониторинга триггеры применяются для выявления возможных проблем и предупреждения администратора о степени вероятности их возникновения. Это дает возможность предотвратить пики нагрузки на оборудование или заканчивающееся место на жестком диске.
### Действия (Action) - представляет собой заданную реакцию на событие (Event). Действие может устанавливаться автоматически или вручную как для одного из событий, так и для целой группы. Параметры действий:
#### •	Name - имя действия;
#### •	Event source - источник события. Источниками событий служат обнаружение (Discovery Events), авторегистрация (Auto registration Events) или заданный триггер (Trigger Events);
#### •	Enable escalations - разрешение на эскалацию событий;
#### •	Period - период времени для шага эскалации, указывается в секундах;
#### •	Default subject - указывается, кто извещается по умолчанию;
#### •	Default message - стандартный текст сообщения;
#### •	Recovery message - текст уведомления после решения проблемы;
#### •	Recovery subject - субъект, которого извещают после операции;
#### •	Status - статус действия, может быть «активно» и «запрещено».
### После отработки триггера для последующих автоматических действий применяются операции. Пользователь может указать для событий операцию или группу операций. Выделяют следующие параметры операций: Step - при эскалации событий; Operation type - действия на определенном шаге, например, «Send message» или «Execute command»; Event Source - источник событий; Send message to - отдельное сообщение (Single user) или групповое (User group); Default message - текст по умолчанию; Subject - кого оповещает система; Message - текст сообщения; Remote command - команда для удаленного управления.
![image](https://user-images.githubusercontent.com/122459067/221558470-8f7d3477-80d5-4534-b50f-b531f5e83d49.png)
### В системе мониторинга предусмотрена возможность получения предупреждений о проблемах (VictorOPS, Opsgenie, Pagerduty, SIGNL4, Email, SMS для надежных оповещений с использованием USB-модемов, Онлайн SMS-шлюзы, Slack,	MS Teams, Telegram, Express.ms, Rocket.chat). 
![image](https://user-images.githubusercontent.com/122459067/221558546-25f3f26c-74d6-4436-be5f-3cd5bb9906ef.png)
![image](https://user-images.githubusercontent.com/122459067/221558577-015a1237-a138-460b-9c7a-99c8e408a410.png)
![image](https://user-images.githubusercontent.com/122459067/221558589-8cc82dce-43a6-4568-b510-85396f4b8c6d.png)
## Выбор в пользу Zabbix позволяют сделать его возможности:
### •	автоматического обнаружения серверов и сетевых устройств;
### •	low-level мониторинга и распределенного мониторинга, мониторинга без администратора;
### •	поддержки и захвата механизмов;
### •	отправки уведомлений о предопределенных событиях;
### •	контроля ресурсов и записи лог-файлов аудита.
